<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.310">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Book Description">
<title>Book Template - 3&nbsp; Social network basics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./3.html" rel="next">
<link href="./1.html" rel="prev">
<link href="./images/logos/logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css">
<link rel="stylesheet" href="include/booktem.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/glossary.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./2.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Social network basics</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Book Template</a> 
        <div class="sidebar-tools-main tools-wide">
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Book-Template.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Book-Template.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
</div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Overview: Social Network Analysis (0HV80)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Social computing using R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Social network basics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Inequality and network position</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Social Cohesion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Rationalization: Diffusion networks</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li>
<a href="#the-vertex-actor-in-the-network" id="toc-the-vertex-actor-in-the-network" class="nav-link active" data-scroll-target="#the-vertex-actor-in-the-network"><span class="header-section-number">3.1</span> The vertex / actor in the network</a>
  <ul class="collapse">
<li><a href="#degree" id="toc-degree" class="nav-link" data-scroll-target="#degree"><span class="header-section-number">3.1.1</span> Degree</a></li>
  <li><a href="#vertex-strength" id="toc-vertex-strength" class="nav-link" data-scroll-target="#vertex-strength"><span class="header-section-number">3.1.2</span> Vertex strength</a></li>
  <li><a href="#average-degree" id="toc-average-degree" class="nav-link" data-scroll-target="#average-degree"><span class="header-section-number">3.1.3</span> Average degree</a></li>
  <li><a href="#degree-distribution" id="toc-degree-distribution" class="nav-link" data-scroll-target="#degree-distribution"><span class="header-section-number">3.1.4</span> Degree distribution</a></li>
  </ul>
</li>
  <li><a href="#the-dyad" id="toc-the-dyad" class="nav-link" data-scroll-target="#the-dyad"><span class="header-section-number">3.2</span> The dyad</a></li>
  <li>
<a href="#the-triad" id="toc-the-triad" class="nav-link" data-scroll-target="#the-triad"><span class="header-section-number">3.3</span> The triad</a>
  <ul class="collapse">
<li><a href="#the-forbidden-triad" id="toc-the-forbidden-triad" class="nav-link" data-scroll-target="#the-forbidden-triad"><span class="header-section-number">3.3.1</span> The forbidden triad</a></li>
  <li><a href="#calculating-a-triad-census" id="toc-calculating-a-triad-census" class="nav-link" data-scroll-target="#calculating-a-triad-census"><span class="header-section-number">3.3.2</span> Calculating a triad census</a></li>
  </ul>
</li>
  <li>
<a href="#distance-in-social-networks" id="toc-distance-in-social-networks" class="nav-link" data-scroll-target="#distance-in-social-networks"><span class="header-section-number">3.4</span> Distance in social networks</a>
  <ul class="collapse">
<li><a href="#walks" id="toc-walks" class="nav-link" data-scroll-target="#walks"><span class="header-section-number">3.4.1</span> walks</a></li>
  <li><a href="#trails" id="toc-trails" class="nav-link" data-scroll-target="#trails"><span class="header-section-number">3.4.2</span> trails</a></li>
  <li><a href="#paths" id="toc-paths" class="nav-link" data-scroll-target="#paths"><span class="header-section-number">3.4.3</span> paths</a></li>
  <li><a href="#walks-and-paths-in-directed-graphs" id="toc-walks-and-paths-in-directed-graphs" class="nav-link" data-scroll-target="#walks-and-paths-in-directed-graphs"><span class="header-section-number">3.4.4</span> walks and paths in directed graphs</a></li>
  <li><a href="#geodesic-distance" id="toc-geodesic-distance" class="nav-link" data-scroll-target="#geodesic-distance"><span class="header-section-number">3.4.5</span> geodesic distance</a></li>
  <li><a href="#calculating-distances" id="toc-calculating-distances" class="nav-link" data-scroll-target="#calculating-distances"><span class="header-section-number">3.4.6</span> calculating distances</a></li>
  </ul>
</li>
  <li>
<a href="#real-versus-random-networks" id="toc-real-versus-random-networks" class="nav-link" data-scroll-target="#real-versus-random-networks"><span class="header-section-number">3.5</span> Real versus random networks</a>
  <ul class="collapse">
<li><a href="#the-erdos-and-renyi-model" id="toc-the-erdos-and-renyi-model" class="nav-link" data-scroll-target="#the-erdos-and-renyi-model"><span class="header-section-number">3.5.1</span> The Erdos and Renyi model</a></li>
  <li><a href="#small-world-models" id="toc-small-world-models" class="nav-link" data-scroll-target="#small-world-models"><span class="header-section-number">3.5.2</span> Small world models</a></li>
  <li><a href="#scale-free-models" id="toc-scale-free-models" class="nav-link" data-scroll-target="#scale-free-models"><span class="header-section-number">3.5.3</span> Scale free models</a></li>
  </ul>
</li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise"><span class="header-section-number">3.6</span> Exercise</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Social network basics</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><p>This part of the course focuses on the basic elements of a network. We discuss the basic idea of connection of a vertex (which in our case is often a human or organisation), then move on to the dyad, two actors connecting, and then we move on to a very central concept in social network analysis and sociological theory, the triad.</p>
<p>Intended learning outcomes:</p>
<ul>
<li>be able to calculate degree and vertex strength</li>
<li>be able to calculate and plot the degree distribution</li>
<li>be able to calculate average degree</li>
<li>be able to calculate dyad census and reciprocity</li>
<li>be able to calculate triad census</li>
<li>be able to calculate transitivity</li>
<li>recognize reasons why triads are often closed</li>
<li>recognize differences between walks, trails and paths</li>
<li>be able to calculate the geodesic distance</li>
<li>be able to calculate distances</li>
<li>be able to create random graphs</li>
</ul>
<section id="the-vertex-actor-in-the-network" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="the-vertex-actor-in-the-network">
<span class="header-section-number">3.1</span> The vertex / actor in the network</h2>
<p>The <strong>network size</strong> (which is often denoted <span class="math inline">\(N\)</span> or in some case <span class="math inline">\(g\)</span>) is the number of vertices, which in a social network are often actors. The <code>vcount</code> function provides the number of vertices in a graph (in addition to asking for information about the graph discussed in previous part). The network size places an upper limit on the number of connections that each individual can have (<span class="math inline">\(N-1\)</span>). For networks of any size, though, few – if any – actors approach this limit. Let’s focus on the number of connections vertices (can) have.</p>
<section id="degree" class="level3" data-number="3.1.1"><h3 data-number="3.1.1" class="anchored" data-anchor-id="degree">
<span class="header-section-number">3.1.1</span> Degree</h3>
<p>A key property of each vertex is its degree, representing the number of links it has to other nodes. The degree can represent the number of friends somebody has, the number of mobile phone contacts an individual has in the call graph (i.e.&nbsp;the number of different individuals the person has talked to), or the number of citations a research paper gets in the citation network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>g1<span class="ot">&lt;-</span><span class="fu">graph_from_literal</span>(A<span class="sc">--</span>B, A<span class="sc">--</span>C, B<span class="sc">--</span>C, B<span class="sc">--</span>D)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">plot</span>(g1, <span class="at">vertex.color=</span><span class="st">"navy"</span>, <span class="at">vertex.size=</span><span class="dv">15</span>,</span>
<span id="cb1-3"><a href="#cb1-3"></a>     <span class="at">vertex.label.cex=</span><span class="dv">1</span>, <span class="at">vertex.label.dist=</span><span class="dv">3</span>, </span>
<span id="cb1-4"><a href="#cb1-4"></a>     <span class="at">vertex.label.degree=</span><span class="sc">-</span>pi<span class="sc">/</span><span class="dv">2</span>, <span class="at">asp=</span><span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="384"></p>
</div>
</div>
<p>In the above figure we have: <span class="math inline">\(k_{1}=2\)</span>, <span class="math inline">\(k_{2}=3\)</span> <span class="math inline">\(k_{3}=2\)</span>,<span class="math inline">\(k_{4}=1\)</span>. The total number of links can be expressed as the sum of the node degrees.</p>
<p><span class="math inline">\(L=\)</span> <span class="math inline">\(\sum_{k = 1}^{4} k\)</span> <span class="math inline">\(=8\)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>g1<span class="ot">&lt;-</span><span class="fu">graph_from_literal</span>(A<span class="sc">-+</span>B, A<span class="sc">+-</span>C, B<span class="sc">+-</span>C, B<span class="sc">-+</span>D)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">degree</span>(g1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A B C D 
2 3 2 1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">plot</span>(g1, <span class="at">vertex.color=</span><span class="st">"navy"</span>, </span>
<span id="cb4-2"><a href="#cb4-2"></a>     <span class="at">vertex.size=</span><span class="dv">15</span>,</span>
<span id="cb4-3"><a href="#cb4-3"></a>     <span class="at">vertex.label.cex=</span><span class="dv">1</span>, </span>
<span id="cb4-4"><a href="#cb4-4"></a>     <span class="at">vertex.label.dist=</span><span class="dv">3</span>, </span>
<span id="cb4-5"><a href="#cb4-5"></a>     <span class="at">vertex.label.degree=</span><span class="sc">-</span>pi<span class="sc">/</span><span class="dv">2</span>, <span class="at">asp=</span><span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="384"></p>
</div>
</div>
<p>This is a directed network. In directed networks we distinguish between “indegree” (incoming links), and “outdegree” (outgoing links). The outdegree is the sum of the outgoing links (row elements in the adjacency matrix): <span class="math inline">\(k_b^{out}= 1\)</span>. The indegree is the sum of the incomping links (the sum of column elements in the adjacency matrix <span class="math inline">\(k_b^{in}= 2\)</span>.</p>
</section><section id="vertex-strength" class="level3" data-number="3.1.2"><h3 data-number="3.1.2" class="anchored" data-anchor-id="vertex-strength">
<span class="header-section-number">3.1.2</span> Vertex strength</h3>
<p>In some cases the number of connections of an actor will only provide limited, or maybe even misleading information. For instance suppose that we measure the number of interactions in a communication network. Two actors interacting once will weigh equally as interacting 100 times when calculating the degree.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>g2<span class="ot">&lt;-</span><span class="fu">graph_from_literal</span>(A<span class="sc">--</span>B, A<span class="sc">--</span>C, B<span class="sc">--</span>C, B<span class="sc">--</span>D)</span>
<span id="cb5-2"><a href="#cb5-2"></a> </span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="fu">E</span>(g2)<span class="sc">$</span>weight<span class="ot">=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">100</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># A simple plot of the network - we'll talk more about plots later</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="fu">plot</span>(g2, <span class="at">asp=</span><span class="fl">0.6</span>, <span class="at">edge.label=</span><span class="fu">E</span>(g2)<span class="sc">$</span>weight)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In this case we could opt for the vertex strength measure. This simply sums up the edge weights of the adjacent edges for each vertex.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">strength</span>(g2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  A   B   C   D 
 21 131  50 100 </code></pre>
</div>
</div>
</section><section id="average-degree" class="level3" data-number="3.1.3"><h3 data-number="3.1.3" class="anchored" data-anchor-id="average-degree">
<span class="header-section-number">3.1.3</span> Average degree</h3>
<p>The average degree is an important property of a network. It simply refers to the average number of links between actors.In the undirected network above the average degree is:</p>
<p><span class="math inline">\(\overline{k}=\)</span> <span class="math inline">\(\frac{1}{N}\)</span> <span class="math inline">\(\sum_{k = 1}^{N}k =\)</span> <span class="math inline">\(\frac{2L}{N}\)</span></p>
<p>So, in a undirected network with four actors, and four edges (like the undirected network above), the average degree is two (since one edge connects two actors twice).</p>
<p>In an directed network the average degree is simply the number of Links divided by the number of actors:</p>
<p><span class="math inline">\(\overline{k}=\)</span> <span class="math inline">\(\frac{1}{N}\)</span> <span class="math inline">\(\sum_{k = 1}^{N}k =\)</span> <span class="math inline">\(\frac{L}{N}\)</span></p>
</section><section id="degree-distribution" class="level3" data-number="3.1.4"><h3 data-number="3.1.4" class="anchored" data-anchor-id="degree-distribution">
<span class="header-section-number">3.1.4</span> Degree distribution</h3>
<p>We can obtain some insight into the structure of a network by looking at the distribution of the degrees. Lets have a look at two social networks: one network consist of relations between households, and was collected in 1948 by American sociologists in a large field study in the Turrialba region, which is a rural area in Costa Rica. The other is a social network data were collected in the Teenage Friends and Lifestyle Study. These are friendship relations between 50 women.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can easily obtain basic information about the networks. The <code>vcount</code> (nr of vertices), and the <code>ecount</code> (nr of edges) commands can be used to verify the results. Note that you can get the same information about the number of vertices/edges by just typing the name of the network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="fu">mean</span>(<span class="fu">degree</span>(friendship))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.808511</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">mean</span>(<span class="fu">degree</span>(household))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">vcount</span>(friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 47</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">ecount</span>(friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 113</code></pre>
</div>
</div>
<p>The degree distribution captures only a small amount of information about a network. But that information still gives important clues into structure of a network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>)) </span>
<span id="cb16-2"><a href="#cb16-2"></a>d.household <span class="ot">=</span><span class="fu">degree</span>(household)</span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="fu">hist</span>(d.household,<span class="at">col=</span><span class="st">"blue"</span>, </span>
<span id="cb16-4"><a href="#cb16-4"></a>      <span class="at">freq=</span><span class="cn">FALSE</span>, <span class="at">xlab=</span><span class="st">"Degree"</span>, <span class="at">ylab=</span><span class="st">"density"</span>,</span>
<span id="cb16-5"><a href="#cb16-5"></a>      <span class="at">main=</span><span class="st">"household network"</span>, <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">15</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.3</span>))</span>
<span id="cb16-6"><a href="#cb16-6"></a></span>
<span id="cb16-7"><a href="#cb16-7"></a>d.friendship <span class="ot">=</span><span class="fu">degree</span>(friendship)</span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="fu">hist</span>(d.friendship,<span class="at">col=</span><span class="st">"pink"</span>, <span class="at">xlab=</span><span class="st">"Degree"</span>, <span class="at">ylab=</span><span class="st">"density"</span>,<span class="at">freq=</span><span class="cn">FALSE</span>,</span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="at">main=</span><span class="st">"friendship network"</span>, <span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">15</span>), <span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The average degrees are quite close (5.3 vs 4.8), and the distributions are similar in the sense that most vertices have relatively small degrees. However, there is a clear difference in the sense that the household network has a number of nodes with large degree, they are connected to many other households, and are in network science often referred to as <strong>hubs</strong>. There are no <strong>isolates</strong> in the friendship network, most women either have 3 or 4 friends (which aligns with the core network idea of Dunbar, see lecture).</p>
</section></section><section id="the-dyad" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="the-dyad">
<span class="header-section-number">3.2</span> The dyad</h2>
<p>We can break large social networks down into their constituent parts. These constituent parts are referred to as “motifs”. The most basic motif consists of two nodes and is called a dyad. Edges in a network signify the presence or absence of dyadic relations. It follows that a dyad in an undirected network can have two unique configurations: connected or disconnected; and three unique configurations in a directed network (mutual, assymetric, and null)</p>
<p>To illustrate we use again the first organizational network collected, consisting of observational data on 14 Western Electric (Hawthorne Plant) employees from the bank wiring room first presented in Roethlisberger &amp; Dickson (1939). This time we focus on helping relations (who helps whom).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>Initial.matrix <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/RDHLP.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">row.names=</span><span class="dv">1</span>, <span class="at">check.names=</span><span class="cn">FALSE</span>, <span class="at">na.strings =</span> <span class="st">""</span>)</span>
<span id="cb17-2"><a href="#cb17-2"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(Initial.matrix) </span>
<span id="cb17-3"><a href="#cb17-3"></a>RDHLP <span class="ot">&lt;-</span> <span class="fu">graph.adjacency</span>(matrix, <span class="at">mode=</span><span class="st">"directed"</span>, <span class="at">weighted=</span><span class="cn">NULL</span>)</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="fu">plot</span>(RDHLP, <span class="at">asp=</span><span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can check the three unique configurations in a directed network (mutual, assymetric, and null) using the <code>dyad_census</code> command.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>RDHLP</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 390894a DN-- 14 24 -- 
+ attr: name (v/c)
+ edges from 390894a (vertex names):
 [1] W1-&gt;W3 W1-&gt;W9 W1-&gt;S1 W2-&gt;W3 W2-&gt;W4 W2-&gt;S1 W3-&gt;W2 W4-&gt;W1 W4-&gt;W3 W4-&gt;W6
[11] W5-&gt;W3 W6-&gt;W3 W6-&gt;W7 W6-&gt;W8 W6-&gt;W9 W7-&gt;S4 W8-&gt;W6 W8-&gt;W7 W8-&gt;W9 W9-&gt;S4
[21] S1-&gt;W7 S2-&gt;W6 S4-&gt;W4 S4-&gt;W8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">dyad_census</span>(RDHLP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$mut
[1] 2

$asym
[1] 20

$null
[1] 69</code></pre>
</div>
</div>
<p>There are 24 edges in this network. Since we have 14 vertices, there could have been (14*13) edges (hence the density equals about .13). There are 91 pairs of vertices. Two of them are mutual, which indicates that there are two edges between them. 20 are assymetric, there is only one edge connecting them, and 69 are unconnected.</p>
<p>The number of mutual pairs are used to meausre reciprocity in a directed network. Reciprocity is the tendency with which affect, or network ties, sent out by egos are returned by alters. Edges are reciprocal when ego and alter both send each other ties; reciprocity is the graph-level analogue, evaluating the tendency for edges to be reciprocal across the whole network.</p>
<p>The default measure of reciprocity in igraph defines the proportion of mutual connections. The total number of connections in RDHLP is 24 (2 * mutual pair + 20 assymetric pairs), the number of reciprocated connections is 4, so 4/24=.17</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">reciprocity</span>(RDHLP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1666667</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">degree</span>(RDHLP, <span class="at">mode=</span><span class="fu">c</span>(<span class="st">"out"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I1 I3 W1 W2 W3 W4 W5 W6 W7 W8 W9 S1 S2 S4 
 0  0  3  3  1  3  1  4  1  3  1  1  1  2 </code></pre>
</div>
</div>
<p>Our graph has a reciprocity score of 0.17. Is that high or low? It depends on your expectation, and the context. In this specific case it maybe that there are a number of senior employees helping others that require help, but cannot offer anything in return. Checking the outdegree of RDHLP, lends some support to this idea.</p>
</section><section id="the-triad" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="the-triad">
<span class="header-section-number">3.3</span> The triad</h2>
<p>Triads consist of three nodes and are therefore more complex than dyads, with more possible arrangements. This becomes clear when you realize an undirected triad consists of three dyads: A and B, B and C, and A and C.</p>
<p>In an directed graph, there will be sixteen unique triads (the unique number of motifs in directed graphs is not easily reduced to a functional form).</p>
<p><img src="C:%5CUsers%5Cgrooks%5CDocuments%5COnderwijs%5C0HV80%5CLecture_notes%5Cimages%5Ctriad.png" class="img-fluid"></p>
<p>In an undirected graph, there are eight possible triads (2^3… sort of obvious given that each dyad can be present or absent and there are three dyads). Of those eight possible triads, four are isomorphic, so that there are four unique triads.</p>
<p><img src="C:%5CUsers%5Cgrooks%5CDocuments%5COnderwijs%5C0HV80%5CLecture_notes%5Cimages%5Ctriadundirected.png" class="img-fluid"></p>
<section id="the-forbidden-triad" class="level3" data-number="3.3.1"><h3 data-number="3.3.1" class="anchored" data-anchor-id="the-forbidden-triad">
<span class="header-section-number">3.3.1</span> The forbidden triad</h3>
<p>Triad number three in the undirected triad census is a so-called transitive triad. A triad involving actors i, j, and k is defined to be transitive if whenever i –&gt; j and j –&gt; k then i –&gt; k. Note that this undirected triads can be transitive or intransitive as well, but this is not important to us in this course.</p>
<p>This situation in which the two alters of one ego are also connected to each other is called <strong>triadic closure</strong> and/or <strong>transitivity</strong>.</p>
<p>This situation occurs frequently in core networks. Around 50% of the triads are closed. These figures, however, underestimate core network density because they only count the <strong>strong ties</strong> between your friends, such as being friends or “knowing each other well.” If you were to ask instead if your friends merely “know each other,” then you would find ties among your friends to be more common because some of your friends may just know each other but not be friends. Indeed, studies suggest that, when taking this minimum definition of “knowing each other,” the clustering among alters in the core network goes up significantly and studies find a quite consistent density of around 0.75.</p>
<p><strong>Transitivity tendency</strong>. If ego A has ties to alters B and C, then B and C are more likely to be (positively) connected compared with the situation in which ego A has a tie to either B or C (or to neither). In simple language: your connections likely know each other as well. We can measure the transitivity tendency (aka <strong>clustering coefficient</strong>) in igraph, for this we use the network of 14 Western Electric (Hawthorne Plant) employees from the bank wiring room again. This time we focus on positive relationships (who is friends with whom).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>Initial.matrix <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/RDPOS.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">row.names=</span><span class="dv">1</span>, <span class="at">check.names=</span><span class="cn">FALSE</span>, <span class="at">na.strings =</span> <span class="st">""</span>)</span>
<span id="cb26-2"><a href="#cb26-2"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(Initial.matrix) </span>
<span id="cb26-3"><a href="#cb26-3"></a>RDPOS <span class="ot">&lt;-</span> <span class="fu">graph.adjacency</span>(matrix, <span class="at">mode=</span><span class="st">"undirected"</span>, <span class="at">weighted=</span><span class="cn">NULL</span>)</span>
<span id="cb26-4"><a href="#cb26-4"></a><span class="fu">plot</span>(RDPOS, <span class="at">asp=</span><span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a><span class="fu">transitivity</span>(RDPOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6428571</code></pre>
</div>
</div>
<p>Transitivity measures the probability that the adjacent vertices of a vertex are connected. The .64 tells us that clustering is high, two relations of a worker (provided that the worker has two) are probably related as well.</p>
<p>How can we understand that transitivity occurs so often in core networks? How can we explain the fact that your friends also know each other and are often befriended too—even though two random individuals have a minimum chance of knowing each other? There are three mechanisms of social tie-formation that explain the driving forces behind the transitivity tendency in core networks (Granovetter, 1973).</p>
<ol type="1">
<li><p><strong>Meeting opportunities</strong> social ties are created in contexts of interaction, i.e., there must be an opportunity for persons B and C to meet each other in order to know each other. Because ego A has strong ties to both B and C, it means she often interacts with B and C. This could mean that B and C share the same context as A, such as attending the same school or living in the same neighborhood, and therefore they also know each other. But it could also mean that B and C meet each other because they often interact with ego A (e.g., they are invited by ego A to her parties). Either way, meeting opportunities for B and C are high and one would expect transitivity in core networks.</p></li>
<li><p><strong>Structural balance</strong> another mechanism underlying transitivity in core networks is that ego A will be uncomfortable having friends B and C who are not having such positive ties with each other and, in particular, when her friends have a negative relationship. Scholars have argued that this unbalanced situation creates psychological strain for ego A and she will strive towards a balanced network, in which her friends B and C maintain a mutually positive relation.</p></li>
<li><p><strong>Homophily</strong> typically people prefer to develop strong ties to others who are like themselves. This means, for example, that friends are chosen because they share the same political or religious views and opinions, or belong to the same ethnic group. For this reason, ego A will probably be quite similar to both B and C. But that also means that B and C are quite similar to one another and therefore they find each other more attractive than a random stranger. In network science researchers commonly use the <strong>assortativity coefficient</strong> to measure homophily. , this is positive is similar vertices (based on some external property) tend to connect to each, and negative otherwise.</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="co"># generate a categorical variable indicating what type a worker is.</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>worker <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">vcount</span>(RDPOS)</span>
<span id="cb29-3"><a href="#cb29-3"></a>worker[<span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"I1"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"I3"</span>]<span class="ot">&lt;-</span><span class="dv">1</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>worker[<span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W1"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W2"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W3"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W4"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W5"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W6"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W7"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W8"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W9"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"W10"</span>]<span class="ot">&lt;-</span><span class="dv">2</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>worker[<span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"S1"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"S2"</span><span class="sc">|</span><span class="fu">V</span>(RDPOS)<span class="sc">$</span>name<span class="sc">==</span><span class="st">"S4"</span>]<span class="ot">&lt;-</span><span class="dv">3</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>worker</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 2 2 2 2 2 2 2 2 2 3 3 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">assortativity</span>(RDPOS, <span class="at">types1=</span>worker)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.1592357</code></pre>
</div>
</div>
<p>The negative value of the assortativity coefficient indicates that similar type of workers are less likely to have positive relations (although the value is small).</p>
<p>A similar question is whether similar actors in terms of degree are attracted to each other, which in this network is not the case.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">assortativity_degree</span>(RDPOS)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.1954023</code></pre>
</div>
</div>
</section><section id="calculating-a-triad-census" class="level3" data-number="3.3.2"><h3 data-number="3.3.2" class="anchored" data-anchor-id="calculating-a-triad-census">
<span class="header-section-number">3.3.2</span> Calculating a triad census</h3>
<p>The triad census calculates how many triads there are of each type (which, as I just mentioned, in a directed network amounts to 16). The interpretation depends on the type of relationship between actors. If we focus on personal relationships, when we see a network with very few complete (003) triads, then we know something about the macro-level structure, just by looking at the frequencies of its constituent parts at the micro-level. By extension, if the whole distribution of triads is very different than the distribution that obtains under a random network, then we hopefully learn something about the macro-level structure that we couldn’t observe just by looking at a visualization of the network.</p>
<p>igraph has a built in function for the triad census: <code>triad.census()</code>. It takes a network object as an argument and returns the number of each type of triad in the network. As you can see below, it returns 16 different numbers. It uses the M-A-N classification structure: M stands for the number of Mutual ties, A stands for the number of Asymmetric ties, and N stands for the number of Null ties.</p>
<p>Mutual means that ego and alter (say A and B) have a mutual relation with each other (A likes B and B likes A). A means that ego and alter have an asymmetric relation with one another, i.e.&nbsp;A likes B but B doesn’t like A… the relation is not reciprocated. Finally, N means that A and B do not have any relation.</p>
<p>003 for example means there are 0 mutual relation, 0 asymmetric relations and 3 null relations. This triad contains no relations. 201 would mean there are two mutual relations, zero asymmetric relations, and 1 null relation. Of three dyads in the triad, two dyads are in a relation, and one dyad is not.</p>
<ol type="1">
<li>003 = A,B,C, the empty subgraph.</li>
<li>012 = A-&gt;B, C, subgraph with a single directed edge.</li>
<li>102 = A&lt;-&gt;B, C, the subgraph with a mutual connection between two vertices.</li>
<li>021D = A&lt;-B-&gt;C, the out-star.</li>
<li>021U = A-&gt;B&lt;-C, the in-star.</li>
<li>021C = A-&gt;B-&gt;C, directed line.</li>
<li>111D = A&lt;-&gt;B&lt;-C.</li>
<li>111U = A&lt;-&gt;B-&gt;C.</li>
<li>030T = A-&gt;B&lt;-C, A-&gt;C.</li>
<li>030C = A&lt;-B&lt;-C, A-&gt;C.</li>
<li>201 = A&lt;-&gt;B&lt;-&gt;C.</li>
<li>120D = A&lt;-B-&gt;C, A&lt;-&gt;C.</li>
<li>120U = A-&gt;B&lt;-C, A&lt;-&gt;C.</li>
<li>120C = A-&gt;B-&gt;C, A&lt;-&gt;C.</li>
<li>210 = A-&gt;B&lt;-&gt;C, A&lt;-&gt;C.</li>
<li>300 = A&lt;-&gt;B&lt;-&gt;C, A&lt;-&gt;C, complete subgraph.</li>
</ol>
<p><code>?triad.census</code> also describes these possible types, telling you the order that the triad types are presented in the <code>triad.census()</code> output.</p>
</section></section><section id="distance-in-social-networks" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="distance-in-social-networks">
<span class="header-section-number">3.4</span> Distance in social networks</h2>
<p>The way people are embedded in networks can be complex. Two persons, call them A and B, might each have five friends. But suppose that none of person A’s friends have any friends except A. Person B’s five friends, in contrast, each have five friends. The information available to B, and B’s potential for influence is far greater than A’s. That is, sometimes being a “friend of a friend” may be quite consequential.</p>
<p>To capture this aspect of how individuals are embedded in networks, one main approach is to examine the distance that an actor is from others. If two actors are adjacent, the distance between them is one (that is, it takes one step for a signal to go from the source to the receiver). If A tells B, and B tells C (and A does not tell C), then actors A and C are at a distance of two. How many actors are at various distances from each actor can be important for understanding the differences among actors in the constraints and opportunities they have as a result of their position. Sometimes we are also interested in how many ways there are to connect between two actors, at a given distance. That is, can actor A reach actor B in more than one way? Sometimes multiple connections may indicate a stronger connection between two actors than a single connection.</p>
<p>The distances among actors in a network may be an important macro-characteristic of the network as a whole. Where distances are great, it may take a long time for information to diffuse across a population. It may also be that some actors are quite unaware of, and influenced by others – even if they are technically reachable, the costs may be too high to conduct exchanges. The variability across the actors in the distances that they have from other actors may be a basis for differentiation and even stratification. Those actors who are closer to more others may be able to exert more power than those who are more distant. We will have a good deal more to say about this aspect of variability in actor distances in the next chapter.</p>
<p>For the moment, we need to learn a bit of jargon that is used to describe the distances between actors: walks, paths, semi-paths, etc. Using these basic definitions, we can then develop some more powerful ways of describing various aspects of the distances among actors in a network.</p>
<p>To describe the distances between actors in a network with precision, we need some terminology. And, as it turns out, whether we are talking about a simple graph or a directed graph makes a good bit of difference. If A and B are adjacent in a simple graph, they have a distance of one. In a directed graph, however, A can be adjacent to B while B is not adjacent to A – the distance from A to B is one, but there is no distance from B to A. Because of this difference, we need slightly different terms to describe distances between actors in graphs and digraphs.</p>
<section id="walks" class="level3" data-number="3.4.1"><h3 data-number="3.4.1" class="anchored" data-anchor-id="walks">
<span class="header-section-number">3.4.1</span> walks</h3>
<p>The most general form of connection between two actors in a <strong>simple graph</strong> (a graph without multiple edges, and self-loops) is called a walk. A <strong>walk</strong> is a sequence of actors and relations that begins and ends with actors. A <strong>closed walk</strong> is one where the beginning and end point of the walk are the same actor. Walks are unrestricted. A walk can involve the same actor or the same relation multiple times. A <strong>cycle</strong> is a specially restricted walk that is often used in algorithms examining the neighborhoods (the points adjacent) of actors. A cycle is a closed walk of 3 or more actors, all of whom are distinct, except for the origin/destination actor. The <strong>length of a walk</strong> is simply the number of relations contained in it. For example,</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>There are many, most often even infinite, walks in a graph. To illustrate just a few, begin at actor A and go to actor C. There is one walk of length 2 (A,B,C). There is one walk of length three (A,B,D,C). There are several walks of length four (A,B,E,D,C; A,B,D,B,C; A,B,E,B,C). Because these are unrestricted, the same actors and relations can be used more than once in a given walk. There are no cycles beginning and ending with A. There are some beginning and ending with actor B (B,D,C,B; B,E,D,B; B,C,D,E,B).</p>
</section><section id="trails" class="level3" data-number="3.4.2"><h3 data-number="3.4.2" class="anchored" data-anchor-id="trails">
<span class="header-section-number">3.4.2</span> trails</h3>
<p>It is usually more useful to restrict our notion of what constitutes a connection somewhat. One possibility is to restrict the count only walks that do not re-use relations. A <strong>trail</strong> between two actors is any walk that includes a given relation no more than once (the same other actors, however, can be part of a trail multiple times. The length of a trail is the number of relations in it. All trails are walks, but not all walks are trails. If the trail begins and ends with the same actor, it is called a closed trail. In our example above, there are a number of trails from A to C. Excluded are tracings like A,B,D,B,C (which is a walk, but is not a trail because the relation BD is used more than once).</p>
</section><section id="paths" class="level3" data-number="3.4.3"><h3 data-number="3.4.3" class="anchored" data-anchor-id="paths">
<span class="header-section-number">3.4.3</span> paths</h3>
<p>Perhaps the most useful definition of a connection between two actors (or between an actor and themself) is a path. A path is a walk in which each other actor and each other relation in the graph may be used at most one time. The single exception to this is a closed path, which begins and ends with the same actor. All paths are trails and walks, but all walks and all trails are not paths. In our example, there are a limited number of paths connecting A and C: A,B,C; A,B,D,C; A,B,E,D,C.</p>
</section><section id="walks-and-paths-in-directed-graphs" class="level3" data-number="3.4.4"><h3 data-number="3.4.4" class="anchored" data-anchor-id="walks-and-paths-in-directed-graphs">
<span class="header-section-number">3.4.4</span> walks and paths in directed graphs</h3>
<p>Walks, trails and paths can also be defined for directed graphs. One option is to disregard the direction of edges. Semi-walks, semi-trails, and semi-paths are the same as for undirected data. In defining these distances, the directionality of connections is simply ignored (that is, arcs - or directed ties are treated as though they were edges - undirected ties). As always, the length of these distances is the number of relations in the walk, trail, or path.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>If we do want to pay attention to the directionality of the connections we can define walks, trails, and paths in the same way as before, but with the restriction that we may not “change direction” as we move across relations from actor to actor.</p>
</section><section id="geodesic-distance" class="level3" data-number="3.4.5"><h3 data-number="3.4.5" class="anchored" data-anchor-id="geodesic-distance">
<span class="header-section-number">3.4.5</span> geodesic distance</h3>
<p>One particular definition of the distance between actors in a network is used by most algorithms to define more complex properties of individual’s positions and the structure of the network as a whole. This quantity is the geodesic distance. For both directed and undirected data, the geodesic distance is the number of relations in the shortest possible walk from one actor to another (or, from an actor to themselves, if we care, which we usually do not).</p>
<p>The geodesic distance is widely used in network analysis. There may be many connections between two actors in a network. If we consider how the relation between two actors may provide each with opportunity and constraint, it may well be the case that not all of these ties matter. For example, suppose that I am trying to send a message to Mia. Since I know her e-mail address, I can send it directly (a path of length 1). I also know Jill, and I know that Jill has Amy’s email address. I could send my message for Mia to Jill, and ask her to forward it. This would be a path of length two. Confronted with this choice, I am likely to choose the geodesic path (i.e.&nbsp;directly to Mia) because it is less trouble and faster, and because it does not depend on Jill.</p>
<p>That is, the geodesic path (or paths, as there can be more than one) is often the “shortest” or most “efficient” connection between two actors. Many algorithms in network analysis assume that actors will use the geodesic path when alternatives are available.</p>
<p>In the network below the geodesic distance between Amy and Mia is three. <span class="math inline">\(Amy \to Eva \to Jill \to Mia\)</span>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section><section id="calculating-distances" class="level3" data-number="3.4.6"><h3 data-number="3.4.6" class="anchored" data-anchor-id="calculating-distances">
<span class="header-section-number">3.4.6</span> calculating distances</h3>
<p>Because the network above is small, the geodesic distances are generally small. This suggests that information may travel pretty quickly in this network. Also note that there is a geodesic distance for each x, y and y, x pair – that is, the graph is fully connected, and all actors are “reachable” from all others (that is, there exists a path of some length from each actor to each other actor).</p>
<p>Because the current network is fully connected, a message that starts anywhere will eventually reach everyone. Although the computer has not calculated it, we might want to calculate the mean (or median) geodesic distance (aka average path length), and the standard deviation in geodesic distances for the matrix, and for each actor row-wise and column-wise. This would tell us how far each actor is from each other as a source of information for the other; and how far each actor is from each other actor who may be trying to influence them. It also tells us which actors behavior (in this case, whether they’ve heard something or not) is most predictable and least predictable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">distances</span>(n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Mia Jill Ivy Ada Eva Amy Gina
Mia    0    1   2   2   2   3    3
Jill   1    0   1   1   1   2    2
Ivy    2    1   0   2   2   3    3
Ada    2    1   2   0   1   2    1
Eva    2    1   2   1   0   1    1
Amy    3    2   3   2   1   0    2
Gina   3    2   3   1   1   2    0</code></pre>
</div>
</div>
<p>In looking at the whole network, we see that it is connected, and that the average geodesic distance among actors is quite small. This suggests a system in which information is likely to reach everyone, and to do so fairly quickly. To get another notion of the size of a network, we might think about its diameter. The <strong>diameter</strong> of a network is the largest geodesic distance in the (connected) network. In the current case, no actor is more than three steps from any other – a very “compact” network. The diameter of a network tells us how “big” it is, in one sense (that is, how many steps are necessary to get from one side of it to the other). The diameter is also a useful quantity in that it can be used to set an upper bound on the lengths of connections that we study. Many researchers limit their explorations of the connections among actors to involve connections that are no longer than the diameter of the network.</p>
<p>The <strong>average path length</strong> for this fully connected graph is easily calculated in R. For each actor, that actor’s largest geodesic distance is called the <strong>eccentricity</strong> – a measure of how far a actor is from the furthest other. For Gina this is three (Ada).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">mean_distance</span>(b, <span class="at">directed=</span>F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.4</code></pre>
</div>
</div>
<p>When a network is not fully connected, we cannot exactly define the geodesic distances among all pairs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>ni  <span class="ot">&lt;-</span> <span class="fu">graph</span>(<span class="fu">c</span>(<span class="st">"Mia"</span>,<span class="st">"Jill"</span>,</span>
<span id="cb39-2"><a href="#cb39-2"></a>              <span class="st">"Jill"</span>,<span class="st">"Ivy"</span>,</span>
<span id="cb39-3"><a href="#cb39-3"></a>              <span class="st">"Jill"</span>,<span class="st">"Ada"</span>,</span>
<span id="cb39-4"><a href="#cb39-4"></a>              <span class="st">"Jill"</span>,<span class="st">"Eva"</span>,</span>
<span id="cb39-5"><a href="#cb39-5"></a>              <span class="st">"Eva"</span>,<span class="st">"Ada"</span>,</span>
<span id="cb39-6"><a href="#cb39-6"></a>              <span class="st">"Eva"</span>,<span class="st">"Amy"</span>,</span>
<span id="cb39-7"><a href="#cb39-7"></a>              <span class="st">"Eva"</span>,<span class="st">"Gina"</span>,</span>
<span id="cb39-8"><a href="#cb39-8"></a>              <span class="st">"Ada"</span>,<span class="st">"Gina"</span>), <span class="at">isolates=</span><span class="fu">c</span>(<span class="st">"Jen"</span>), <span class="at">directed =</span> F)</span>
<span id="cb39-9"><a href="#cb39-9"></a>lay <span class="ot">=</span> <span class="fu">layout.fruchterman.reingold</span>(ni)</span>
<span id="cb39-10"><a href="#cb39-10"></a><span class="fu">plot</span>(ni, <span class="at">vertex.size=</span><span class="dv">25</span>, <span class="at">layout =</span> lay, <span class="at">asp=</span><span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">distances</span>(ni)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Mia Jill Ivy Ada Eva Amy Gina Jen
Mia    0    1   2   2   2   3    3 Inf
Jill   1    0   1   1   1   2    2 Inf
Ivy    2    1   0   2   2   3    3 Inf
Ada    2    1   2   0   1   2    1 Inf
Eva    2    1   2   1   0   1    1 Inf
Amy    3    2   3   2   1   0    2 Inf
Gina   3    2   3   1   1   2    0 Inf
Jen  Inf  Inf Inf Inf Inf Inf  Inf   0</code></pre>
</div>
</div>
<p>This poses a problem if we want to calculate the average path length. The current standard approach is to calculate the averages for all the different components (connects subsets more about this later). In some approaches the geodesic distance between unconnected actors was defined as a length greater than that of any real distance in the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">mean_distance</span>(ni,<span class="at">directed =</span> <span class="cn">FALSE</span>, <span class="at">unconnected =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
</div>
</section></section><section id="real-versus-random-networks" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="real-versus-random-networks">
<span class="header-section-number">3.5</span> Real versus random networks</h2>
<p>Human networks differ from random networks. Scientific models are simplified descriptions of the real world that are used to predict or explain the characteristics or behavior of the phenomenon of interest. Models can be used in network science in the same way. With network models we can move beyond simple description to build and test hypotheses about network structures, formation processes, and network dynamics In this chapter, a number of basic mathematical models of network structure and formation are covered. These are important models in the history of network science, but they are still useful today to provide insight into fundamental properties of social networks, to serve as baseline or comparison models for empirical social networks, and to act as building blocks for more complex network simulations.Well over a dozen functions are provided in igraph for generating random networks based on a number of mathematical algorithms and heuristics. These all use ‘game’ as the final part of the function name, for example <code>barabasi.game()</code> produces scale-free random graphs based on the Baraba´si-Albert model (1999). We will discuss three important mathematical network models available in igraph.</p>
<section id="the-erdos-and-renyi-model" class="level3" data-number="3.5.1"><h3 data-number="3.5.1" class="anchored" data-anchor-id="the-erdos-and-renyi-model">
<span class="header-section-number">3.5.1</span> The Erdos and Renyi model</h3>
<p>The earliest historically, and still one of the most important mathematical models of network structure, is the random graph model first developed by Paul Erdos and Alfred Renyi in the late 1950s and early 1960s (Newman 2010). This is sometimes called the Poisson random graph model (because of the Poisson degree distribution of large random graphs), or sometimes even just the random graph model. The model is quite simple, G(n,m), where a random graph G is defined with n vertices and m edges among those vertices chosen randomly. An equivalent model that is easier to work with is G(n, p), where instead of specifying m edges, each edge appears in the graph with probability p.&nbsp;This random graph model is implemented in igraph with the erdos.reny.game() function. A random graph is produced by specifying the size of the desired network, and either the number of edges, or the probability of observing an edge. The type argument is used to specify whether the second argument should be interpreted as probability of an edge p, or number of edges m.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">sample_gnm</span>(<span class="at">n=</span><span class="dv">12</span>,<span class="dv">10</span>)</span>
<span id="cb44-2"><a href="#cb44-2"></a>g2 <span class="ot">&lt;-</span> <span class="fu">sample_gnm</span>(<span class="at">n=</span><span class="dv">12</span>,<span class="dv">10</span>)</span>
<span id="cb44-3"><a href="#cb44-3"></a></span>
<span id="cb44-4"><a href="#cb44-4"></a>op <span class="ot">&lt;-</span> <span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">1</span>),<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb44-5"><a href="#cb44-5"></a><span class="fu">plot</span>(g1,<span class="at">vertex.color=</span><span class="dv">2</span>, <span class="at">main=</span><span class="st">"First random graph"</span>)</span>
<span id="cb44-6"><a href="#cb44-6"></a><span class="fu">plot</span>(g2,<span class="at">vertex.color=</span><span class="dv">4</span>, <span class="at">main=</span><span class="st">"Second random graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">par</span>(op)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Despite the simplicity of the random graph model, it has led to a number of important discoveries about network structures. First, for large n the network will have a Poisson degree distribution.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>g <span class="ot">&lt;-</span> <span class="fu">sample_gnp</span>(<span class="at">n=</span><span class="dv">1000</span>,.<span class="dv">005</span>)</span>
<span id="cb46-2"><a href="#cb46-2"></a><span class="fu">plot</span>(<span class="fu">degree.distribution</span>(g),</span>
<span id="cb46-3"><a href="#cb46-3"></a><span class="at">type=</span><span class="st">"b"</span>,<span class="at">xlab=</span><span class="st">"Degree"</span>,<span class="at">ylab=</span><span class="st">"Proportion"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It turns out that random graphs become entirely connected for fairly low values of average degree. That means even when edges are determined randomly, each individual network member does not have to be connected to too many other members for the network itself to be connected (i.e., the network has only one component). More precisely, if p is greater than <span class="math inline">\(ln{(n)}/n\)</span>, then the random graph is likely to be connected in one large component (Newman 2010). The average degree of a random graph, <span class="math inline">\(c\)</span>, is related to graph size and edge probability: <span class="math inline">\(c = (n−1)p\)</span>. So this means that across the range of network sizes often seen in social network analysis (say, 100–10,000), the average degree required to have a completely connected network will be less than approximately 12. The following random graph simulation and plot demonstrates this relationship.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Another surprising property of random graphs is that the connected random graphs are quite compact. That is, the diameter of the largest components in random graphs stays relatively small even for large networks.</p>
</section><section id="small-world-models" class="level3" data-number="3.5.2"><h3 data-number="3.5.2" class="anchored" data-anchor-id="small-world-models">
<span class="header-section-number">3.5.2</span> Small world models</h3>
<p>The Erdos-Renyi random graph model has one major limitation in that it does not describe the properties of many real-world social networks. In particular, fully random graphs have degree distributions that do not match observed networks very well, and they also have quite low levels of clustering (transitivity).One type of model, called the small-world model by Watts and Strogatz (1998), produces random networks that are somewhat more realistic than Erdos-Renyi.</p>
<p>The small-world model starts with a circle of nodes, where each node is connected to its c immediate neighbors (forming a formal lattice structure). Then, a small number of existing edges are rewired, where they are removed and then replaced with another tie that connects two random nodes. If the rewiring probability is 0, then we end up with the original lattice network. When p is 1, then we have an Erdos-Renyi random graph. The main interesting discovery of Watts and Strogatz who created the model, is that only a small fraction of ties needs to be rewired to dramatically reduce the diameter of the network.</p>
<p>This figure shows how various small-world model networks look with different rewiring probabilities. The <code>watts.strogatz.game()</code> is called to produce a small-world network of 30 nodes. Setting the option nei=2 (for neighborhood) will start the network with each node tied to the closest two neighbors on either side. This results in each node having degree=4.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>g1 <span class="ot">&lt;-</span> <span class="fu">sample_smallworld</span>(<span class="at">dim=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">30</span>, <span class="at">nei=</span><span class="dv">2</span>, <span class="at">p=</span><span class="dv">0</span>)</span>
<span id="cb47-2"><a href="#cb47-2"></a>g2 <span class="ot">&lt;-</span> <span class="fu">sample_smallworld</span>(<span class="at">dim=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">30</span>, <span class="at">nei=</span><span class="dv">2</span>, <span class="at">p=</span>.<span class="dv">05</span>)</span>
<span id="cb47-3"><a href="#cb47-3"></a>g3 <span class="ot">&lt;-</span> <span class="fu">sample_smallworld</span>(<span class="at">dim=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">30</span>, <span class="at">nei=</span><span class="dv">2</span>, <span class="at">p=</span>.<span class="dv">20</span>)</span>
<span id="cb47-4"><a href="#cb47-4"></a>g4 <span class="ot">&lt;-</span> <span class="fu">sample_smallworld</span>(<span class="at">dim=</span><span class="dv">1</span>, <span class="at">size=</span><span class="dv">30</span>, <span class="at">nei=</span><span class="dv">2</span>, <span class="at">p=</span><span class="dv">1</span>)</span>
<span id="cb47-5"><a href="#cb47-5"></a>op <span class="ot">&lt;-</span> <span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">1</span>),<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))</span>
<span id="cb47-6"><a href="#cb47-6"></a><span class="fu">plot</span>(g1,<span class="at">vertex.label=</span><span class="cn">NA</span>,<span class="at">layout=</span>layout_with_kk,</span>
<span id="cb47-7"><a href="#cb47-7"></a>     <span class="at">main=</span><span class="fu">expression</span>(<span class="fu">paste</span>(<span class="fu">italic</span>(p),<span class="st">" = 0"</span>)))</span>
<span id="cb47-8"><a href="#cb47-8"></a><span class="fu">plot</span>(g2,<span class="at">vertex.label=</span><span class="cn">NA</span>,</span>
<span id="cb47-9"><a href="#cb47-9"></a>     <span class="at">main=</span><span class="fu">expression</span>(<span class="fu">paste</span>(<span class="fu">italic</span>(p),<span class="st">" = .05"</span>)))</span>
<span id="cb47-10"><a href="#cb47-10"></a><span class="fu">plot</span>(g3,<span class="at">vertex.label=</span><span class="cn">NA</span>,</span>
<span id="cb47-11"><a href="#cb47-11"></a>     <span class="at">main=</span><span class="fu">expression</span>(<span class="fu">paste</span>(<span class="fu">italic</span>(p),<span class="st">" = .20"</span>)))</span>
<span id="cb47-12"><a href="#cb47-12"></a><span class="fu">plot</span>(g4,<span class="at">vertex.label=</span><span class="cn">NA</span>,</span>
<span id="cb47-13"><a href="#cb47-13"></a>     <span class="at">main=</span><span class="fu">expression</span>(<span class="fu">paste</span>(<span class="fu">italic</span>(p),<span class="st">" = 1"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The following simulation and figure shows how quickly rewiring reduces the diameter of a network in the small-world model. Working with a network with 100 nodes, each node starts out connected to its two neighbors on each side. The graph will thus have 200 edges. The starting diameter of the lattice network is 25 (getting from one node to the other side of the circle takes 25 steps).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>g100 <span class="ot">&lt;-</span> <span class="fu">sample_smallworld</span>(<span class="at">dim=</span><span class="dv">1</span>,<span class="at">size=</span><span class="dv">100</span>,<span class="at">nei=</span><span class="dv">2</span>,<span class="at">p=</span><span class="dv">0</span>)</span>
<span id="cb48-2"><a href="#cb48-2"></a>g100</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 3b225dc U--- 100 200 -- Watts-Strogatz random graph
+ attr: name (g/c), dim (g/n), size (g/n), nei (g/n), p (g/n), loops
| (g/l), multiple (g/l)
+ edges from 3b225dc:
 [1]  1-- 2  2-- 3  3-- 4  4-- 5  5-- 6  6-- 7  7-- 8  8-- 9  9--10 10--11
[11] 11--12 12--13 13--14 14--15 15--16 16--17 17--18 18--19 19--20 20--21
[21] 21--22 22--23 23--24 24--25 25--26 26--27 27--28 28--29 29--30 30--31
[31] 31--32 32--33 33--34 34--35 35--36 36--37 37--38 38--39 39--40 40--41
[41] 41--42 42--43 43--44 44--45 45--46 46--47 47--48 48--49 49--50 50--51
[51] 51--52 52--53 53--54 54--55 55--56 56--57 57--58 58--59 59--60 60--61
[61] 61--62 62--63 63--64 64--65 65--66 66--67 67--68 68--69 69--70 70--71
+ ... omitted several edges</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="fu">diameter</span>(g100)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
</div>
<p>The simulation is set to calculate 300 networks, ten each for the number of edges to rewire ranging from 1 to 30. Because we know how many edges are in each graph (200), the rewiring probability can be calculated by the number of rewired edges divided by total number of edges. If 30 edges are rewired, then, the probability is 0.15.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The plot demonstrates that after only rewiring ten of the edges (p=0.05), the diameter has shrunk at least 60%, from 25 to about 10.</p>
</section><section id="scale-free-models" class="level3" data-number="3.5.3"><h3 data-number="3.5.3" class="anchored" data-anchor-id="scale-free-models">
<span class="header-section-number">3.5.3</span> Scale free models</h3>
<p>An important limitation of the previous two mathematical network models is that they produce graphs with degree distributions that are not representative of many.real-world social networks. Numerous studies, in fact, have shown that a wide variety of observed networks have heavy-tailed degree distributions that approximately follow a “power law”. These are typically called scale-free networks. For example, both the network of sexual partners and the World-Wide-Web exhibit this scale-free pattern. That is, some people have many sexual partners (high degree), but most people have a small number of sexual partners.Similarly, some websites have a very large number of other websites connected to them, but most websites have only a few connections. How does this power-law characteristic feature of scale-free social networks arise? A number of network scientists have explored this question, and have determined that a network formation process of cumulative advantage, or preferential attachment can explain this. That is, as networks grow, new nodes are more likely to form ties with other nodes that already have many ties, due to their visibility in the network. This ‘rich-gets-richer’ phenomena has been shown to lead to the powerlaw distribution in networks.</p>
<p>The preferential attachment model of Barabasi and Albert is implemented in igraph with the <code>barabasi.game()</code> function. This is a more complicated algorithm than those for the previous models, partly because this is a network growth model, not just a static network structure model.</p>
<p>The figure below displays a 500-node network that is formed with this preferential attachment model. The default behavior of the algorithm is that as each new node is added to the network, it is connected to another node in the network, with probability proportional to the degree of that node. Thus, some nodes in the network will end up with many more ties than most of the other nodes. Note that <code>sample_pa</code> command is equivalent, it contains many options to complicate the model not shown here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>g <span class="ot">&lt;-</span> <span class="fu">sample_pa</span>(<span class="dv">500</span>, <span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="fu">V</span>(g)<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="st">"lightblue"</span></span>
<span id="cb52-3"><a href="#cb52-3"></a><span class="fu">V</span>(g)[<span class="fu">degree</span>(g) <span class="sc">&gt;</span> <span class="dv">9</span>]<span class="sc">$</span>color <span class="ot">&lt;-</span> <span class="st">"red"</span></span>
<span id="cb52-4"><a href="#cb52-4"></a><span class="fu">plot</span>(g, <span class="at">vertex.label =</span> <span class="cn">NA</span>, <span class="at">vertex.size =</span> <span class="fu">degree</span>(g))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="2_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section></section><section id="exercise" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="exercise">
<span class="header-section-number">3.6</span> Exercise</h2>
<p>In the 1950s John Gagnon collected sociometric choice data from 67 prison inmates. All were asked, “What fellows on the tier are you closest friends with?” Each was free to choose as few or as many “friends” as he desired. The data were analyzed by MacRae and characterized by him as “less clear cut” in their internal structure than similar data from schools or residential populations.</p>
<ol type="1">
<li><p>Read the data and transform them into an igraph object. Then think about how many friends an inmate will have, and test your hypothesis. Assume that both an incoming nomination and outgoing nomination indicate a friendship relation.</p></li>
<li><p>Who is the most popular inmate?</p></li>
<li><p>Are more popular inmates also inclined to nominate more others as friends (so in a way are the more agreeable)</p></li>
<li><p>To what degree are friendship nominations reciprocated?</p></li>
<li><p>Calculate the triad census and interpret the outcome.</p></li>
<li><p>Assuming that a nomination indicates a friendship, what is the diameter of the network, what is the average path length? How clustered is the network?</p></li>
<li><p>Compare the prison network to a random network (ER model with the same nr of vertices and edges)</p></li>
</ol>


</section></main><!-- /main --><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script><script>
// open rdrr links externally ----

var exlinks = document.querySelectorAll("a[href^='https://rdrr.io']");
var exlink_func = function(){
  window.open(this.href);
  return false;
};
for (var i = 0; i < exlinks.length; i++) {
    exlinks[i].addEventListener('click', exlink_func, false);
}

// visible second sidebar in mobile ----

function move_sidebar() {
  var toc = document.getElementById("TOC");
  var small_sidebar = document.querySelector("#quarto-sidebar .sidebar-menu-container");
  var right_sidebar = document.getElementById("quarto-margin-sidebar");

  if (window.innerWidth < 768) {
    small_sidebar.append(toc);
  } else {
    right_sidebar.append(toc);
  }
}
move_sidebar();
window.onresize = move_sidebar;
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./1.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Social computing using R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./3.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Inequality and network position</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">CC-BY (2023) Me</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>